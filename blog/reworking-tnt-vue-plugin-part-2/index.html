<!doctype html>
<html data-n-head-ssr data-theme="forest" lang="en" data-n-head="%7B%22data-theme%22:%7B%22ssr%22:%22forest%22%7D,%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Reworking TNT: Creating a Vue Plugin - Part 2 | Code</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="My programming blog."><meta data-n-head="ssr" data-hid="og:site_name" property="og:site_name" content="Code"><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="code"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Reworking TNT: Creating a Vue Plugin - Part 2 | Code"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="Working through Webpack and other bundler conflicts and dependencies"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://code.thombruce.com/blog/reworking-tnt-vue-plugin-part-2/"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://code.thombruce.com/code.jpg"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" data-hid="shortcut-icon" rel="shortcut icon" href="/_nuxt/icons/icon_64x64.5f6a36.png"><link data-n-head="ssr" data-hid="apple-touch-icon" rel="apple-touch-icon" href="/_nuxt/icons/icon_512x512.5f6a36.png" sizes="512x512"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.66c912cb.json" data-hid="manifest"><script data-n-head="ssr" src="https://analytics.thombruce.com/umami.js" data-website-id="6cf28329-b93d-488f-91bc-275aa8fccd5b" async defer></script><link rel="preload" href="/_nuxt/d6e1dd7.js" as="script"><link rel="preload" href="/_nuxt/f19a1b0.js" as="script"><link rel="preload" href="/_nuxt/08b7536.js" as="script"><link rel="preload" href="/_nuxt/b8a6e14.js" as="script"><link rel="preload" href="/_nuxt/7b998af.js" as="script"><style data-vue-ssr-id="2e52eaac:0 0d8b0c4d:0 a57b151a:0 539dee96:0 c64bf50e:0 68f24870:0 e40228a2:0 3bace5fb:0 c568d22e:0 24b24afe:0 f952f79e:0">/*! tailwindcss v2.2.9 | MIT License | https://tailwindcss.com *//*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-moz-tab-size:4;-o-tab-size:4;tab-size:4;line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}hr{height:0;color:inherit}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{box-sizing:border-box;border:0 solid}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af}input::placeholder,textarea::placeholder{color:#9ca3af}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*,:after,:before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}select,textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding:.5rem .75rem;font-size:1rem;line-height:1.5rem}select:focus,textarea:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset:var(--tw-empty, );/*!*//*!*/--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#2563eb;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),0 0 transparent;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent);border-color:#2563eb}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#6b7280;opacity:1}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#6b7280;opacity:1}input::placeholder,textarea::placeholder{color:#6b7280;opacity:1}select{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem;-webkit-print-color-adjust:exact;color-adjust:exact}:root{background-color:hsla(0 0% 100%/1);background-color:hsla(var(--b1)/var(--tw-bg-opacity,1));color:hsla(215 27.9% 16.9%/1);color:hsla(var(--bc)/var(--tw-text-opacity,1))}html{-webkit-tap-highlight-color:transparent}:root{--p:259 94.4% 51.2%;--pf:259 94.3% 41%;--pc:0 0% 100%;--s:314 100% 47.1%;--sf:314 100% 37.1%;--sc:0 0% 100%;--a:174 60% 51%;--af:174 59.8% 41%;--ac:0 0% 100%;--n:219 14.1% 27.8%;--nf:222 13.4% 19%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:210 20% 98%;--b3:216 12.2% 83.9%;--bc:215 27.9% 16.9%;--in:207 89.8% 53.9%;--su:174 100% 29%;--wa:36 100% 50%;--er:14 100% 57.1%;--rounded-box:1rem;--rounded-btn:0.5rem;--rounded-badge:1.9rem;--animation-btn:0.25s;--animation-input:.2s;--padding-card:2rem;--btn-text-case:uppercase;--btn-focus-scale:0.95;--navbar-padding:.5rem;--border-btn:1px;--tab-border:1px;--tab-radius:0.5rem;--tab-spacer:0.5rem;--focus-ring:2px;--focus-ring-offset:2px;--glass-opacity:30%;--glass-border-opacity:10%;--glass-reflex-degree:100deg;--glass-reflex-opacity:10%;--glass-blur:40px;--glass-text-shadow-opacity:5%}@media (prefers-color-scheme:dark){:root{--p:259 94% 61%;--pf:259 94.4% 51.2%;--pc:0 0% 100%;--s:314 100% 47.1%;--sf:314 100% 37.1%;--sc:0 0% 100%;--a:174 60% 51%;--af:174 59.8% 41%;--ac:0 0% 100%;--n:222 13.4% 19%;--nf:223 13.7% 10%;--nc:0 0% 100%;--b1:219 14.1% 27.8%;--b2:222 13.4% 19%;--b3:223 13.7% 10%;--bc:228 14.3% 93.1%;--in:202 100% 70%;--su:89 61.6% 52%;--wa:54 68.8% 63.5%;--er:0 100% 71.8%}}.btn{border-color:transparent;border-color:hsla(219 14.1% 27.8%/1);border-color:hsla(var(--n)/var(--tw-border-opacity,1));cursor:pointer;display:inline-flex;flex-wrap:wrap;align-items:center;justify-content:center;flex-shrink:0;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.15s;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);border-radius:.5rem;border-radius:var(--rounded-btn,.5rem);height:3rem;font-size:.875rem;line-height:1.25rem;line-height:2;padding-left:1rem;padding-right:1rem;min-height:3rem;font-weight:600;text-transform:uppercase;text-transform:uppercase;text-transform:var(--btn-text-case,uppercase);border-width:1px;border-width:var(--border-btn,1px);-webkit-animation:button-pop .25s ease-out;-webkit-animation:button-pop var(--animation-btn,.25s) ease-out;animation:button-pop .25s ease-out;animation:button-pop var(--animation-btn,.25s) ease-out;--tw-bg-opacity:1;background-color:hsla(219 14.1% 27.8%/1);background-color:hsla(var(--n)/var(--tw-bg-opacity,1));--tw-border-opacity:1;--tw-text-opacity:1;color:hsla(0 0% 100%/1);color:hsla(var(--nc)/var(--tw-text-opacity,1))}.btn:focus{outline:2px solid transparent;outline-offset:2px}@-webkit-keyframes spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.dropdown{display:inline-block;position:relative}.dropdown>:focus{outline:2px solid transparent;outline-offset:2px}.dropdown .dropdown-content{opacity:0;position:absolute;visibility:hidden;z-index:50;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-x:.95;--tw-scale-y:1;--tw-scale-y:.95;transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform-origin:top;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.15s;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.dropdown-end .dropdown-content{right:0}.dropdown:not(.dropdown-hover):focus .dropdown-content,.dropdown:not(.dropdown-hover):focus-within .dropdown-content{opacity:1;visibility:visible}.footer{width:100%;font-size:.875rem;line-height:1.25rem;-moz-column-gap:1rem;column-gap:1rem;row-gap:2.5rem}.footer,.footer>*{display:grid;place-items:start;grid-auto-flow:row}.footer>*{gap:.5rem}@media (min-width:48rem){.footer{grid-auto-flow:column}}.label{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:.5rem .25rem}.input{flex-shrink:1;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.15s;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);height:3rem;font-size:.875rem;line-height:1.25rem;line-height:2;padding-left:1rem;padding-right:1rem;--tw-bg-opacity:1;background-color:hsla(0 0% 100%/1);background-color:hsla(var(--b1)/var(--tw-bg-opacity,1));--tw-border-opacity:1;--tw-border-opacity:0;border-color:hsla(215 27.9% 16.9%/1);border-color:hsla(var(--bc)/var(--tw-border-opacity,1));border-width:1px;border-radius:.5rem;border-radius:var(--rounded-btn,.5rem)}.input:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 2px hsl(0 0% 100%),0 0 0 4px hsla(215 27.9% 16.9%/.2);box-shadow:0 0 0 2px hsl(var(--b1)),0 0 0 4px hsla(var(--bc)/.2)}.kbd{display:inline-flex;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:hsla(210 20% 98%/1);background-color:hsla(var(--b2)/var(--tw-bg-opacity,1));--tw-border-opacity:1;--tw-border-opacity:0.2;border-color:hsla(222 13.4% 19%/1);border-color:hsla(var(--nf)/var(--tw-border-opacity,1));padding-left:.5rem;padding-right:.5rem;border-radius:.5rem;border-radius:var(--rounded-btn,.5rem);border-width:1px 1px 2px;min-height:2.2em;min-width:2.2em}.link{cursor:pointer;text-decoration:underline}.menu{overflow:hidden}.menu,.menu li{display:flex;flex-direction:column}.menu li{align-items:stretch}.menu li>a,.menu li>span{display:flex;align-items:center;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.15s;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);padding:.75rem 1.25rem;color:currentColor}.menu li>a{cursor:pointer}.menu li>a:focus{outline:2px solid transparent;outline-offset:2px}.progress{overflow:hidden;position:relative;width:100%;height:.5rem;border-radius:1rem;border-radius:var(--rounded-box,1rem)}.progress,.select{-webkit-appearance:none;-moz-appearance:none;appearance:none}.select{cursor:pointer;display:inline-flex;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:3rem;font-size:.875rem;line-height:1.25rem;line-height:2;padding-left:1rem;padding-right:2.5rem;min-height:3rem;--tw-bg-opacity:1;background-color:hsla(0 0% 100%/1);background-color:hsla(var(--b1)/var(--tw-bg-opacity,1));--tw-border-opacity:1;--tw-border-opacity:0;border-color:hsla(215 27.9% 16.9%/1);border-color:hsla(var(--bc)/var(--tw-border-opacity,1));border-width:1px;font-weight:600;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.15s;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);border-radius:.5rem;border-radius:var(--rounded-btn,.5rem);background-image:linear-gradient(45deg,transparent 50%,currentColor 0),linear-gradient(135deg,currentColor 50%,transparent 0);background-position:calc(100% - 20px) calc(1px + 50%),calc(100% - 16px) calc(1px + 50%);background-size:4px 4px,4px 4px;background-repeat:no-repeat}.select:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 2px hsl(0 0% 100%),0 0 0 4px hsla(215 27.9% 16.9%/.2);box-shadow:0 0 0 2px hsl(var(--b1)),0 0 0 4px hsla(var(--bc)/.2)}.table{position:relative;text-align:left}.table th:first-child{position:sticky;position:-webkit-sticky;left:0;z-index:10}.textarea{flex-shrink:1;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.15s;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);font-size:.875rem;line-height:1.25rem;line-height:2;padding:.5rem 1rem;min-height:3rem;--tw-bg-opacity:1;background-color:hsla(0 0% 100%/1);background-color:hsla(var(--b1)/var(--tw-bg-opacity,1));--tw-border-opacity:1;--tw-border-opacity:0;border-color:hsla(215 27.9% 16.9%/1);border-color:hsla(var(--bc)/var(--tw-border-opacity,1));border-width:1px;border-radius:.5rem;border-radius:var(--rounded-btn,.5rem)}.textarea:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 2px hsl(0 0% 100%),0 0 0 4px hsla(215 27.9% 16.9%/.2);box-shadow:0 0 0 2px hsl(var(--b1)),0 0 0 4px hsla(var(--bc)/.2)}.btn:active:focus,.btn:active:hover{-webkit-animation:none;animation:none;transform:scale(.95);transform:scale(var(--btn-focus-scale,.95))}.btn:hover{--tw-bg-opacity:1;background-color:hsla(222 13.4% 19%/1);background-color:hsla(var(--nf)/var(--tw-bg-opacity,1));--tw-border-opacity:1;border-color:hsla(222 13.4% 19%/1);border-color:hsla(var(--nf)/var(--tw-border-opacity,1))}.btn:focus-visible{box-shadow:0 0 0 2px hsl(0 0% 100%),0 0 0 4px hsl(222 13.4% 19%);box-shadow:0 0 0 2px hsl(var(--b1)),0 0 0 4px hsl(var(--nf))}.btn-ghost{background-color:transparent;border-color:transparent;border-width:1px;color:currentColor}.btn-ghost:hover{--tw-bg-opacity:1;--tw-bg-opacity:0.2;background-color:hsla(215 27.9% 16.9%/1);background-color:hsla(var(--bc)/var(--tw-bg-opacity,1));--tw-border-opacity:0}.btn-ghost:focus-visible{box-shadow:0 0 0 2px currentColor}@-webkit-keyframes button-pop{0%{transform:scale(.95);transform:scale(var(--btn-focus-scale,.95))}40%{transform:scale(1.02)}to{transform:scale(1)}}@keyframes button-pop{0%{transform:scale(.95);transform:scale(var(--btn-focus-scale,.95))}40%{transform:scale(1.02)}to{transform:scale(1)}}@-webkit-keyframes checkmark{0%{background-position-y:5px}50%{background-position-y:-2px}to{background-position-y:0}}@keyframes checkmark{0%{background-position-y:5px}50%{background-position-y:-2px}to{background-position-y:0}}.dropdown:focus .dropdown-content,.dropdown:focus-within .dropdown-content{--tw-scale-x:1;--tw-scale-y:1}.label a:hover{--tw-text-opacity:1;color:hsla(215 27.9% 16.9%/1);color:hsla(var(--bc)/var(--tw-text-opacity,1))}.link:focus{outline:2px solid transparent;outline-offset:2px}.link:focus-visible{box-shadow:0 0 0 2px currentColor}.menu li>a:focus,.menu li>a:hover{--tw-bg-opacity:1;--tw-bg-opacity:0.1;background-color:hsla(215 27.9% 16.9%/1);background-color:hsla(var(--bc)/var(--tw-bg-opacity,1))}.menu li>a.active{background-color:hsla(259 94.4% 51.2%/1);background-color:hsla(var(--p)/var(--tw-bg-opacity,1))}.menu li>a.active,.menu li>a:active{--tw-bg-opacity:1;--tw-text-opacity:1;color:hsla(0 0% 100%/1);color:hsla(var(--pc)/var(--tw-text-opacity,1))}.menu li>a:active{background-color:hsla(259 94.3% 41%/1);background-color:hsla(var(--pf)/var(--tw-bg-opacity,1))}.menu ul{padding-left:1.5rem}.progress::-moz-progress-bar{--tw-bg-opacity:1;background-color:hsla(219 14.1% 27.8%/1);background-color:hsla(var(--n)/var(--tw-bg-opacity,1))}.progress::-webkit-progress-bar{--tw-bg-opacity:1;--tw-bg-opacity:0.2;background-color:hsla(219 14.1% 27.8%/1);background-color:hsla(var(--n)/var(--tw-bg-opacity,1));border-radius:1rem;border-radius:var(--rounded-box,1rem)}.progress::-webkit-progress-value{--tw-bg-opacity:1;background-color:hsla(222 13.4% 19%/1);background-color:hsla(var(--nf)/var(--tw-bg-opacity,1));border-radius:1rem;border-radius:var(--rounded-box,1rem)}@-webkit-keyframes radiomark{0%{box-shadow:0 0 0 12px hsl(0 0% 100%) inset,0 0 0 12px hsl(0 0% 100%) inset,var(--focus-shadow);box-shadow:0 0 0 12px hsl(var(--b1)) inset,0 0 0 12px hsl(var(--b1)) inset,var(--focus-shadow)}50%{box-shadow:0 0 0 3px hsl(0 0% 100%) inset,0 0 0 3px hsl(0 0% 100%) inset,var(--focus-shadow);box-shadow:0 0 0 3px hsl(var(--b1)) inset,0 0 0 3px hsl(var(--b1)) inset,var(--focus-shadow)}to{box-shadow:0 0 0 4px hsl(0 0% 100%) inset,0 0 0 4px hsl(0 0% 100%) inset,var(--focus-shadow);box-shadow:0 0 0 4px hsl(var(--b1)) inset,0 0 0 4px hsl(var(--b1)) inset,var(--focus-shadow)}}@keyframes radiomark{0%{box-shadow:0 0 0 12px hsl(0 0% 100%) inset,0 0 0 12px hsl(0 0% 100%) inset,var(--focus-shadow);box-shadow:0 0 0 12px hsl(var(--b1)) inset,0 0 0 12px hsl(var(--b1)) inset,var(--focus-shadow)}50%{box-shadow:0 0 0 3px hsl(0 0% 100%) inset,0 0 0 3px hsl(0 0% 100%) inset,var(--focus-shadow);box-shadow:0 0 0 3px hsl(var(--b1)) inset,0 0 0 3px hsl(var(--b1)) inset,var(--focus-shadow)}to{box-shadow:0 0 0 4px hsl(0 0% 100%) inset,0 0 0 4px hsl(0 0% 100%) inset,var(--focus-shadow);box-shadow:0 0 0 4px hsl(var(--b1)) inset,0 0 0 4px hsl(var(--b1)) inset,var(--focus-shadow)}}.table td,.table th{padding:1rem;vertical-align:middle;white-space:nowrap}.table tr.active td,.table tr.active th,.table tr.active:nth-child(2n) td,.table tr.active:nth-child(2n) th{--tw-bg-opacity:1;background-color:hsla(216 12.2% 83.9%/1);background-color:hsla(var(--b3)/var(--tw-bg-opacity,1))}.table:not(.table-zebra) tbody tr:not(:last-child) td,.table:not(.table-zebra) tbody tr:not(:last-child) th,.table:not(.table-zebra) tfoot tr:not(:last-child) td,.table:not(.table-zebra) tfoot tr:not(:last-child) th,.table:not(.table-zebra) thead tr:not(:last-child) td,.table:not(.table-zebra) thead tr:not(:last-child) th{--tw-border-opacity:1;border-color:hsla(210 20% 98%/1);border-color:hsla(var(--b2)/var(--tw-border-opacity,1));border-bottom-width:1px}.table tfoot td,.table tfoot th,.table thead td,.table thead th{--tw-bg-opacity:1;background-color:hsla(210 20% 98%/1);background-color:hsla(var(--b2)/var(--tw-bg-opacity,1));font-weight:700;font-size:.75rem;line-height:1rem;text-transform:uppercase}.table tfoot td:first-child,.table tfoot th:first-child,.table thead td:first-child,.table thead th:first-child{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem}.table tfoot td:last-child,.table tfoot th:last-child,.table thead td:last-child,.table thead th:last-child{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.table tbody td,.table tbody th{--tw-bg-opacity:1;background-color:hsla(0 0% 100%/1);background-color:hsla(var(--b1)/var(--tw-bg-opacity,1))}.rounded-box{border-radius:1rem;border-radius:var(--rounded-box,1rem)}.table{display:table}.h-96{height:24rem}.w-52{width:13rem}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}.overflow-y-auto{overflow-y:auto}.bg-base-200{--tw-bg-opacity:1;background-color:hsla(210 20% 98%/var(--tw-bg-opacity));background-color:hsla(var(--b2)/var(--tw-bg-opacity))}.text-base-content{--tw-text-opacity:1;color:hsla(215 27.9% 16.9%/var(--tw-text-opacity));color:hsla(var(--bc)/var(--tw-text-opacity))}*,:after,:before{--tw-shadow:0 0 transparent}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06);box-shadow:0 0 transparent,0 0 transparent,var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}*,:after,:before{--tw-ring-inset:var(--tw-empty, );/*!*//*!*/--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}article a{cursor:pointer;text-decoration:underline;text-decoration:none}article a:hover{text-decoration:underline}article a{--tw-text-opacity:1;color:hsla(var(--p)/var(--tw-text-opacity,1))}article a:hover{--tw-text-opacity:1;color:hsla(var(--pf)/var(--tw-text-opacity,1))}article a:focus{outline:2px solid transparent;outline-offset:2px}article a:focus-visible{box-shadow:0 0 0 2px currentColor}article a{cursor:pointer;text-decoration:underline}article a:focus{outline:2px solid transparent;outline-offset:2px}article a:focus-visible{box-shadow:0 0 0 2px currentColor}article header a{font-weight:700}article header time{--tw-text-opacity:1;color:hsla(var(--in) / var(--tw-text-opacity))}h1,h2,h3,h4,h5,h6{font-weight:700}h1{font-size:1.5rem;line-height:2rem}h2{font-size:1.25rem;line-height:1.75rem}h3,h4,h5,h6{font-size:1.125rem;line-height:1.75rem}.nuxt-content{overflow-wrap:break-word}.nuxt-content h1,.nuxt-content h2,.nuxt-content h3,.nuxt-content h4,.nuxt-content h5,.nuxt-content h6{margin-bottom:.5rem}.nuxt-content p{margin-bottom:1rem}.nuxt-content table{display:block;table-layout:fixed;overflow-x:auto;padding-bottom:1rem;text-align:center}.nuxt-content table td,.nuxt-content table th{padding-left:1.25rem;padding-right:1.25rem}.nuxt-content blockquote{margin-left:1.25rem;margin-right:1.25rem;font-style:italic}.nuxt-content .nuxt-content-highlight{position:relative}.nuxt-content .nuxt-content-highlight>.filename{position:absolute;top:0;right:0;z-index:10;margin-top:.75rem;margin-right:1rem;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875rem;line-height:1.25rem;line-height:1;letter-spacing:-.025em;--tw-text-opacity:1;color:rgba(31,41,55,var(--tw-text-opacity))}.nuxt-content .nuxt-content-highlight>.filename+pre[class*=language-]{padding-top:2rem}.nuxt-content pre[class*=language-]{position:static}@font-face{font-family:"Ubuntu Mono";src:url(/_nuxt/fonts/UbuntuMono-BI.f93a950.ttf) format("truetype")}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}header[data-v-2541c494]{display:flex;flex-direction:column;justify-content:center;padding-left:1rem;padding-right:1rem;padding-top:1.25rem;padding-bottom:1.25rem}span[data-v-0be375ac]{margin:auto;display:block;width:-webkit-min-content;width:-moz-min-content;width:min-content;font-family:Ubuntu Mono;font-size:3rem;line-height:1;--tw-text-opacity:1;color:hsla(var(--bc) / var(--tw-text-opacity))}@media (min-width:640px){span[data-v-0be375ac]{font-size:4.5rem;line-height:1}}@media (min-width:768px){span[data-v-0be375ac]{font-size:6rem;line-height:1}}.navbar[data-v-717f7bf9]{display:flex;justify-content:center}dl.authors dd[data-v-2fe40326]:first-of-type:before{content:"by "}dl.authors dd[data-v-2fe40326]:not(:last-child):after{content:", "}dl.authors dd[data-v-2fe40326]:nth-last-child(2):after{content:" and "}footer[data-v-119ebcc8]{margin-top:1.25rem;--tw-bg-opacity:1;background-color:hsla(var(--n) / var(--tw-bg-opacity));padding-top:1.25rem;padding-bottom:1.25rem;--tw-text-opacity:1;color:hsla(var(--nc) / var(--tw-text-opacity))}.social[data-v-2940a398]{font-size:1.875rem;line-height:2.25rem}.social ul[data-v-2940a398]{display:flex;justify-content:center}.social ul li a[data-v-2940a398]{display:block;padding-left:1rem;padding-right:1rem}.simple-icon svg{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em;width:1em;fill:currentColor}.copyright[data-v-a82ffc02]{padding-top:1rem;text-align:center;font-size:.875rem;line-height:1.25rem}.copyright a[data-v-a82ffc02]{cursor:pointer;text-decoration:underline}.copyright a[data-v-a82ffc02]:focus{outline:2px solid transparent;outline-offset:2px}.copyright a[data-v-a82ffc02]:focus-visible{box-shadow:0 0 0 2px currentColor}</style><link rel="preload" href="/_nuxt/static/1630972784/blog/reworking-tnt-vue-plugin-part-2/state.js" as="script"><link rel="preload" href="/_nuxt/static/1630972784/blog/reworking-tnt-vue-plugin-part-2/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1630972784/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="appContainer"><header data-v-2541c494><span class="py-24" data-v-0be375ac data-v-2541c494><a href="/" class="nuxt-link-active" data-v-0be375ac>CODE</a></span><div class="navbar" data-v-717f7bf9 data-v-2541c494><nav data-v-717f7bf9><a href="/blog" class="btn btn-ghost nuxt-link-active" data-v-717f7bf9><span data-v-717f7bf9>Blog</span></a><a href="/work" class="btn btn-ghost" data-v-717f7bf9><span data-v-717f7bf9>My Work</span></a><a href="/credits" class="btn btn-ghost" data-v-717f7bf9><span data-v-717f7bf9>Credits</span></a></nav><div class="dropdown dropdown-end" data-v-717f7bf9><div tabindex="0" class="btn btn-ghost"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="swatchbook" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-swatchbook fa-w-16"><path fill="currentColor" d="M434.66,167.71h0L344.5,77.36a31.83,31.83,0,0,0-45-.07h0l-.07.07L224,152.88V424L434.66,212.9A32,32,0,0,0,434.66,167.71ZM480,320H373.09L186.68,506.51c-2.06,2.07-4.5,3.58-6.68,5.49H480a32,32,0,0,0,32-32V352A32,32,0,0,0,480,320ZM192,32A32,32,0,0,0,160,0H32A32,32,0,0,0,0,32V416a96,96,0,0,0,192,0ZM96,440a24,24,0,1,1,24-24A24,24,0,0,1,96,440Zm32-184H64V192h64Zm0-128H64V64h64Z"></path></svg>Theme</div><div class="overflow-y-auto shadow dropdown-content h-96 w-52 rounded-box bg-base-200 text-base-content"><ul class="menu"><li><a tabindex="0" data-set-theme="light" data-act-class="active">Light</a></li><li><a tabindex="0" data-set-theme="dark" data-act-class="active">Dark</a></li><li><a tabindex="0" data-set-theme="cupcake" data-act-class="active">Cupcake</a></li><li><a tabindex="0" data-set-theme="bumblebee" data-act-class="active">Bumblebee</a></li><li><a tabindex="0" data-set-theme="emerald" data-act-class="active">Emerald</a></li><li><a tabindex="0" data-set-theme="corporate" data-act-class="active">Corporate</a></li><li><a tabindex="0" data-set-theme="synthwave" data-act-class="active">Synthwave</a></li><li><a tabindex="0" data-set-theme="retro" data-act-class="active">Retro</a></li><li><a tabindex="0" data-set-theme="cyberpunk" data-act-class="active">Cyberpunk</a></li><li><a tabindex="0" data-set-theme="valentine" data-act-class="active">Valentine</a></li><li><a tabindex="0" data-set-theme="halloween" data-act-class="active">Halloween</a></li><li><a tabindex="0" data-set-theme="garden" data-act-class="active">Garden</a></li><li><a tabindex="0" data-set-theme="forest" data-act-class="active">Forest</a></li><li><a tabindex="0" data-set-theme="aqua" data-act-class="active">Aqua</a></li><li><a tabindex="0" data-set-theme="lofi" data-act-class="active">Lofi</a></li><li><a tabindex="0" data-set-theme="pastel" data-act-class="active">Pastel</a></li><li><a tabindex="0" data-set-theme="fantasy" data-act-class="active">Fantasy</a></li><li><a tabindex="0" data-set-theme="wireframe" data-act-class="active">Wireframe</a></li><li><a tabindex="0" data-set-theme="black" data-act-class="active">Black</a></li><li><a tabindex="0" data-set-theme="luxury" data-act-class="active">Luxury</a></li><li><a tabindex="0" data-set-theme="dracula" data-act-class="active">Dracula</a></li></ul></div></div></div></header><main class="container mx-auto px-5"><div class="max-w-prose mx-auto"><div class="breadcrumbs"><ul><li><a href="/" class="nuxt-link-active"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-home fa-w-18"><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg></a></li><li><a href="/blog" class="nuxt-link-active">Blog</a></li><li><a href="/blog/reworking-tnt-vue-plugin-part-2" aria-current="page" class="nuxt-link-exact-active nuxt-link-active">Reworking Tnt Vue Plugin Part 2</a></li></ul></div><div><article><header data-v-2fe40326><dl class="inline-block mr-1" data-v-2fe40326><dt class="sr-only" data-v-2fe40326>Categories</dt><dd class="inline-block mr-2" data-v-2fe40326><a href="/categories/journal" data-v-2fe40326>Journal</a></dd></dl><dl class="inline-block mr-1" data-v-2fe40326><dt class="sr-only" data-v-2fe40326>Series</dt><dd class="inline-block mr-2" data-v-2fe40326><a href="/series/my-process" data-v-2fe40326>My Process</a></dd><dd class="inline-block mr-2" data-v-2fe40326><a href="/series/reworking-tnt" data-v-2fe40326>Reworking TNT</a></dd></dl><h1 data-v-2fe40326>Reworking TNT: Creating a Vue Plugin - Part 2</h1><address data-v-2fe40326><dl class="authors" data-v-2fe40326><dt class="sr-only" data-v-2fe40326>Authors</dt><dd class="inline" data-v-2fe40326><a href="/authors/thom-bruce" rel="author" data-v-2fe40326>Thom Bruce</a></dd></dl></address><dl class="inline-block mr-1" data-v-2fe40326><dt class="sr-only" data-v-2fe40326>Tags</dt><dd class="inline-block mr-2" data-v-2fe40326><a href="/tags/vue-js" data-v-2fe40326>Vue.js</a></dd><dd class="inline-block mr-2" data-v-2fe40326><a href="/tags/nuxt-js" data-v-2fe40326>NuxtJS</a></dd><dd class="inline-block mr-2" data-v-2fe40326><a href="/tags/tnt" data-v-2fe40326>TNT</a></dd><dd class="inline-block mr-2" data-v-2fe40326><a href="/tags/dynamite" data-v-2fe40326>Dynamite</a></dd></dl><time pubdate datetime="2021-08-30T17:42:29.000Z" class="block" data-v-2fe40326>Aug 30, 2021, 5:42 PM</time><!----></header><aside><h2>Table of Contents</h2><ol><li class="toc3"><a href="/blog/reworking-tnt-vue-plugin-part-2#quick-aside">Quick Aside</a></li></ol></aside><hr><div><div class="nuxt-content"><p><a href="reworking-tnt-vue-plugin-part-1">Last time</a> we ran into a bit of a blockade trying to make my TNT plugin provide its own default configuration. The issue: Vue CLI, which we used to generate the Dynamite UI project I'm working on, obfuscates a lot of the configurability of Vue and Webpack. Under the hood, Vue CLI is using Webpack... <em>I think</em>. And this can be configured from the project with our own Webpack config files, I presume, but the obscurity is making it difficult to assess the relationship between the UI project and my plugin.</p>
<p>Today then, we're going to start from scratch and create a more barebones Vue project. This should be a minimum viable reproduction of what we ultimately want to achieve... meaning essentially we just really want two dependencies: Vue and TNT. We might find we need more, which may either need to be added to the Vue project directly or, preferably, to TNT, but the result should be a plugin that works with plain Vue projects, with Vue CLI ones and with Nuxt, because those latter two approaches build upon the first. In fact, this is what this whole "Reworking TNT" exercise has been about: prying TNT apart from the Nuxt logic that it previously depended on. Let's get rolling... First, we need a new project:</p>
<p>Step one: Create an empty project folder and initialise Git.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>mkdir my-vue-project
cd my-vue-project
git init
</code></pre></div>
<p>There's nothing to commit. The project is still empty.</p>
<p>Step two: Initialise Yarn.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>yarn init
</code></pre></div>
<p>This runs an interactive session. I'm not going to change any of the default values, though; this is just a throwaway project.</p>
<p>Step three: Install the two main dependencies - Vue and TNT - and link to our local version of TNT for development.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>yarn add vue https://github.com/thombruce/tnt
yarn link @thombruce/tnt
</code></pre></div>
<p>One thing worth noticing is that at this point, a <code>node_modules</code> directory will have been generated. We don't want that to be committed, so we'll add a <code>.gitignore</code> file to the root of our project with <code>node_modules/</code> in there to be ignored by Git:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>echo "node_modules/" > .gitignore
</code></pre></div>
<p>And let's <code>git commit</code>...</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>git add . && git commit -m "Initialize project"
</code></pre></div>
<p>So, Vue and TNT along with all of their child dependencies are now installed...</p>
<p>Next, I'm just going to copy over some files from my Dynamite UI project; specifically, <code>src/App.vue</code> and <code>src/main.js</code>. These are the main components that tell Vue what my app looks like and how to render it; they just need some minor alterations for this more basic setup. Removal of any references to VueRouter and the Vuex Store, neither of which is installed. After that, my <code>src/main.js</code> looks like this:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Vue</span></span> <span class="token keyword module">from</span> <span class="token string">'vue'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">'./App.vue'</span>

<span class="token keyword module">import</span> <span class="token constant">TNT</span> <span class="token keyword module">from</span> <span class="token string">'@thombruce/tnt'</span>

<span class="token maybe-class-name">Vue</span><span class="token punctuation">.</span><span class="token property-access">config</span><span class="token punctuation">.</span><span class="token property-access">productionTip</span> <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token maybe-class-name">Vue</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token constant">TNT</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token arrow operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token maybe-class-name">App</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div>
<p>I've also created a minimal <code>index.html</code> file in a new <code>public</code> folder, the main part of which is that it includes this:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
</code></pre></div>
<p>This is where the Vue project will ultimately be injected...</p>
<p>So I've got an <code>App.vue</code> which handles how the app will be rendered, I have a <code>main.js</code> which tells Vue how to render and it how to behave... and I have an <code>index.html</code> where it should be injected but... isn't, because I still do have to do <em>the next thing</em>.</p>
<p>Vue's own documentation is pretty shy on how to handle this part; the part where Vue is packaged into the HTML template. The docs really seem to favour Vue CLI, which handles all of this automatically. For manual configuration, they link us to Webpack's documentation. Webpack isn't our only option - one can argue that a package like Gulp is simpler and more elegant, particularly for simple cases, and there's Vite too which is a new kid on the package bundling scene from the creators of Vue. For right now though, I think probably Webpack is going to give us the easiest solution thanks to its having some preconceptions, in a manner of speaking. For instance, whereas Gulp would require us to write our own bundling script, Webpack abstracts that part and has some base assumptions about web projects. Like by default, Webpack will look for a <code>src/index.js</code> and will output the result of bundling that file to <code>dist/main.js</code>. We may need to install some custom loaders, like Vue Loader... maybe. But err... well, we'll get to that. So...</p>
<p>Step four: Install Webpack and other bundling necessities.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>yarn add --dev webpack webpack-cli webpack-dev-server vue-loader vue-template-compiler style-loader css-loader postcss-loader html-webpack-plugin
</code></pre></div>
<p>That's err... a lot of dependencies. And there's at least one missing that we might have mentioned - pug-plain-loader - but this is already being installed by TNT, so there's no need to respecify it. All of these are loaders, bundlers and plugins for Webpack's packaging of the app as a webpage. Also notable: webpack-dev-server is a package that will let us run the bundled application in development mode, just makes it a little easier to check things are working.</p>
<p>Right, but this needs configuring... First, let's add the build and development build scripts to <code>package.json</code> for convenience:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-json"><code><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode production"</span><span class="token punctuation">,</span>
  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --mode development"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div>
<p>That way I can just run <code>yarn start</code> to run the dev server. But it still needs a Webpack configuration to reference... That's a bit more verbose.</p>
<p>In a new file, <code>webpack.config.js</code>, I have got:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">VueLoaderPlugin</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"vue-loader"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-webpack-plugin"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">"./src/main.js"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span>vue<span class="token anchor function">$</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">"vue-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span>pug<span class="token anchor function">$</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        oneOf<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token anchor function">^</span><span class="token special-escape escape">\?</span>vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pug-plain-loader'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'raw-loader'</span><span class="token punctuation">,</span> <span class="token string">'pug-plain-loader'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span>css<span class="token anchor function">$</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"style-loader"</span><span class="token punctuation">,</span>
          <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">"postcss-loader"</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              postcssOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token punctuation">[</span><span class="token string">"tailwindcss"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">[</span><span class="token string">"autoprefixer"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
                <span class="token punctuation">]</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"public"</span><span class="token punctuation">,</span> <span class="token string">"index.html"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>A pretty minimal Webpack configuration, all things considered. I don't know if it's the <strong>absolute</strong> minimum for my needs, but it's minimal enough.</p>
<p>Apart from this, I also have a <code>tailwind.config.js</code> file with contents:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code>module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  purge<span class="token operator">:</span> <span class="token punctuation">{</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      safelist<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">data-theme<span class="token anchor function">$</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./index.html'</span><span class="token punctuation">,</span> <span class="token string">'./src/**/*.{vue,js,ts,jsx,tsx}'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  darkMode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// or 'media' or 'class'</span>
  theme<span class="token operator">:</span> <span class="token punctuation">{</span>
    extend<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  variants<span class="token operator">:</span> <span class="token punctuation">{</span>
    extend<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@tailwindcss/forms'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'daisyui'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>These contents could in fact be inserted into the Webpack config file instead, in the empty object at <code>["tailwindcss", {}],</code>... I could in fact also separate out the PostCSS config from Webpack into a <code>postcss.config.js</code> file, which includes that declaration. In fact...</p>
<p>That could be the answer to my problem.</p>
<p>See, I already know that Tailwind's config file location can be customised by setting its path explicitly in the PostCSS config: <a href="https://tailwindcss.com/docs/configuration#using-a-different-file-name" rel="nofollow noopener noreferrer" target="_blank">https://tailwindcss.com/docs/configuration#using-a-different-file-name</a></p>
<p>I can also change the path to the default PostCSS config file by passing the option to the PostCSS loader: <a href="https://github.com/postcss/postcss-load-config/issues/55#issuecomment-266375307" rel="nofollow noopener noreferrer" target="_blank">https://github.com/postcss/postcss-load-config/issues/55#issuecomment-266375307</a></p>
<p>The combination of these two options should enable me to specify that my PostCSS config and my Tailwind config live in my TNT plugin's folder... right? Obviously.</p>
<p>And because the config files are JavaScript, I should be able to have them (or some other part of the stack) communicate that <strong>if</strong> a config file does exist in the root project directory, <strong>then</strong> do use that instead. That way, an end user would only have to install the essential dependencies, then reference our PostCSS config file, and things would... work seamlessly.</p>
<p>Is that the best approach? Probably not...</p>
<hr>
<h3 id="quick-aside"><a href="#quick-aside" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Quick Aside</h3>
<p>I mentioned pug-plain-loader specifically up above. Is this strictly a dependency of TNT or is it one that should be moved into the inheriting projects? I sort of just install it out of habit every time I install Pug. Strictly though, it is a Webpack dependency... meaning that if an inheriting project used Vite or Gulp or some other process to package things, it wouldn't be essential. So then...</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>cd ../tnt
yarn remove pug-plain-loader
git add . && git commit -m "Remove pug-plain-loader"
git push
cd ../my-vue-project
yarn upgrade @thombruce/tnt --latest
yarn add --dev pug-plain-loader
</code></pre></div>
<p>I also need to <code>yarn upgrade @thombruce/tnt --latest</code> over on Dynamite UI and <code>yarn add --dev pug-plain-loader</code> so that that continues to work as well. I don't need to modify any Webpack business there, because it seems Vue CLI still picks up on the use of Pug automatically... however I could instead use the <code>vue add pug</code> option to install Pug via Vue CLI template.</p>
<p>In fact looking at the package for vue-cli-plugin-pug at <a href="https://github.com/jaeming/vue-cli-plugin-pug" rel="nofollow noopener noreferrer" target="_blank">https://github.com/jaeming/vue-cli-plugin-pug</a>... There isn't a great deal going on there. Just a <code>package.json</code> file with pug, pug-plain-loader and raw-loader dependencies and an <code>index.js</code> which chains into the Webpack setup. So hold up just a second! Could I create a "vue-cli-plugin-tnt" that does the same? That, for example, includes all of the Webpack and loader dependencies I would want and chains into the Webpack process to configure those? Answer...</p>
<p>Yes, I absolutely could do that for Vue CLI projects. It would list TNT as a dependency, configure it automatically, and we'd be rolling...</p>
<p>So then... we should absolutely keep TNT Core, let's call it, as barebones as possible. Make no assumptions that the end user will be using Webpack or some other bundler, or Vue CLI or Nuxt, and instead maintain separate dependencies which specifically install it for Vue CLI and Nuxt, and... for plain Vue? We can aim to document the far more involved setup that includes a heap of extra dependencies... at least for the time being. In future, we can add a production-ready build, maybe. Will have to look into that.</p>
<p>The thing is... I don't want this to be a big, unproductive diversion. The main thing I want is for TNT to be compatible with the toolings I will be using specifically, meaning just Nuxt and Vue CLI for the time being.</p>
<p>So then...</p>
<hr>
<p>We will have to consider better approaches for installation on a plain Vue project at some other time. For our purposes now, though, TNT has been stripped of all Nuxt-specific dependencies and of Vue CLI specific ones.</p>
<p>I'm already maintaining a nuxt-tnt package that does not yet depend on this alternate version of TNT, but will eventually.</p>
<p>The last thing to do as of right now is to create an additional project that bundles TNT as a Vue CLI dependency. In the next post, we'll do just that...</p></div></div></article></div></div></main><footer data-v-119ebcc8><div class="social" data-v-2940a398 data-v-119ebcc8><ul data-v-2940a398><li data-v-2940a398><a href="https://facebook.com/thombruce" target="_blank" data-v-2940a398><span class="simple-icon" data-v-2940a398><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></span></a></li><li data-v-2940a398><a href="https://twitter.com/thombruce" target="_blank" data-v-2940a398><span class="simple-icon" data-v-2940a398><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></span></a></li><li data-v-2940a398><a href="https://github.com/thombruce" target="_blank" data-v-2940a398><span class="simple-icon" data-v-2940a398><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span></a></li></ul></div><div class="copyright" data-v-a82ffc02 data-v-119ebcc8>
<a href="https://thombruce.com/" data-v-a82ffc02>Thom Bruce</a>
2021 - 2021</div></footer></div></div></div><script defer src="/_nuxt/static/1630972784/blog/reworking-tnt-vue-plugin-part-2/state.js"></script><script src="/_nuxt/d6e1dd7.js" defer></script><script src="/_nuxt/7b998af.js" defer></script><script src="/_nuxt/f19a1b0.js" defer></script><script src="/_nuxt/08b7536.js" defer></script><script src="/_nuxt/b8a6e14.js" defer></script>
  </body>
</html>
